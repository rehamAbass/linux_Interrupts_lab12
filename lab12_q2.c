//////////////////////////////////////////////////////////////////////////////
//
//				Lab 12 Q2 :		Interrupts Handling
//				name : 			" Reham Abass "
//				Date : 		   	30/06/2019
//
//
#include <stdio.h>					//	Input/Output 
#include <dos.h>					//	Interrupts

void interrupt(*Int8Save) (void);
volatile int stopper = 0 ;					//	global Counter on time
/////////////////////////////////////////////////////////////////////////////////////////////////////

void interrupt my_Handler(void) {
	stopper++;						//	counter ++
	Int8Save();						//	deal with interrupt
}
/////////////////////////////////////////////////////////////////////////////////////////////////////

void startTimer() {
	stopper = 0;					//	initialize counter
	Int8Save = getvect(8);			//	save old Routine
	setvect(8, my_Handler);			//	define new Handler
}
/////////////////////////////////////////////////////////////////////////////////////////////////////

void endTimer() {					//	print result & update setting
	setvect(8, Int8Save);			//	return to the old Routine setting 
	printf("\n time : %d sec\n", (int)(stopper / 18.2065));
}
///////////////////////////////////////////////////////////////////////////////////////////////////
void main(){
	int i;
	startTimer();
	for (i= 0; i < 5; i++){sleep(1);}
	endTimer();
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////